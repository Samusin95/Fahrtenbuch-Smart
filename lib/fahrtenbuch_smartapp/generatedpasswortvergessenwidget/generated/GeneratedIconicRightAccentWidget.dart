import 'package:flutter/material.dart';
import 'package:flutter_session/flutter_session.dart';
import 'package:flutterapp/fahrtenbuch_smartapp/generatedpasswortvergessenwidget/generated/Generated20spTitleMediumWidget.dart';
import 'package:flutterapp/fahrtenbuch_smartapp/generatedpasswortvergessenwidget/generated/GeneratedPrimaryWidget.dart';

import 'GeneratedVergessen_Text_PasswortNeuWidget.dart';
import 'GeneratedVergessen_Text_PasswortWiederholenWidget.dart';
import 'package:http/http.dart' as http;
import 'dart:async';

/* Frame Iconic Right Â· Accent
    Autogenerated by FlutLab FTF Generator
  */
class GeneratedIconicRightAccentWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: () => Navigator.pushNamed(context, '/GeneratedLoginWidget', arguments: updatedata()),
      child: Container(
        width: 328.0,
        height: 48.0,
        child: Stack(
            fit: StackFit.expand,
            alignment: Alignment.center,
            overflow: Overflow.visible,
            children: [
              ClipRRect(
                borderRadius: BorderRadius.zero,
                child: Container(
                  color: Color.fromARGB(255, 58, 159, 165),
                ),
              ),
              Positioned(
                left: 0.0,
                top: 0.0,
                right: null,
                bottom: null,
                width: 328.0,
                height: 48.0,
                child: GeneratedPrimaryWidget(),
              ),
              Positioned(
                left: 36.0,
                top: 12.0,
                right: null,
                bottom: null,
                width: 256.0,
                height: 24.0,
                child: Generated20spTitleMediumWidget(),
              )
            ]),
      ),
    );
  }
}

Future<List> updatedata() async {
  String token = await FlutterSession().get("token");
  final response = await http.post(Uri.parse("http://10.0.231.10/testsmart/updatedatapasswort.php"), body: {  //IP Home: 192.168.100.11
    "emailtoken": token,
    "passwort": neuespasswortkey.currentState.neuespasswort.text,
    "passwort2": neuespasswort2key.currentState.neuespasswort2.text,
  });
  if(response.statusCode == 200){
    debugPrint("Data posted successfully");
  }else{
    debugPrint("Something went wrong! Status Code is: ${response.statusCode}");
  };
}
